!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.transformer=e():t.transformer=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=3)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}(i(4))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.SOURCE=0]="SOURCE",t[t.NAMEDTYPE=1]="NAMEDTYPE",t[t.FUNCTIONTYPE=2]="FUNCTIONTYPE",t[t.TYPENAME=3]="TYPENAME",t[t.TYPEPARAMETER=4]="TYPEPARAMETER",t[t.PARAMETER=5]="PARAMETER",t[t.IDENTIFIER=6]="IDENTIFIER",t[t.ASSERTION=7]="ASSERTION",t[t.BINARY=8]="BINARY",t[t.CALL=9]="CALL",t[t.CLASS=10]="CLASS",t[t.COMMA=11]="COMMA",t[t.ELEMENTACCESS=12]="ELEMENTACCESS",t[t.FALSE=13]="FALSE",t[t.FUNCTION=14]="FUNCTION",t[t.INSTANCEOF=15]="INSTANCEOF",t[t.LITERAL=16]="LITERAL",t[t.NEW=17]="NEW",t[t.NULL=18]="NULL",t[t.PARENTHESIZED=19]="PARENTHESIZED",t[t.PROPERTYACCESS=20]="PROPERTYACCESS",t[t.TERNARY=21]="TERNARY",t[t.SUPER=22]="SUPER",t[t.THIS=23]="THIS",t[t.TRUE=24]="TRUE",t[t.CONSTRUCTOR=25]="CONSTRUCTOR",t[t.UNARYPOSTFIX=26]="UNARYPOSTFIX",t[t.UNARYPREFIX=27]="UNARYPREFIX",t[t.BLOCK=28]="BLOCK",t[t.BREAK=29]="BREAK",t[t.CONTINUE=30]="CONTINUE",t[t.DO=31]="DO",t[t.EMPTY=32]="EMPTY",t[t.EXPORT=33]="EXPORT",t[t.EXPORTDEFAULT=34]="EXPORTDEFAULT",t[t.EXPORTIMPORT=35]="EXPORTIMPORT",t[t.EXPRESSION=36]="EXPRESSION",t[t.FOR=37]="FOR",t[t.IF=38]="IF",t[t.IMPORT=39]="IMPORT",t[t.RETURN=40]="RETURN",t[t.SWITCH=41]="SWITCH",t[t.THROW=42]="THROW",t[t.TRY=43]="TRY",t[t.VARIABLE=44]="VARIABLE",t[t.VOID=45]="VOID",t[t.WHILE=46]="WHILE",t[t.CLASSDECLARATION=47]="CLASSDECLARATION",t[t.ENUMDECLARATION=48]="ENUMDECLARATION",t[t.ENUMVALUEDECLARATION=49]="ENUMVALUEDECLARATION",t[t.FIELDDECLARATION=50]="FIELDDECLARATION",t[t.FUNCTIONDECLARATION=51]="FUNCTIONDECLARATION",t[t.IMPORTDECLARATION=52]="IMPORTDECLARATION",t[t.INDEXSIGNATUREDECLARATION=53]="INDEXSIGNATUREDECLARATION",t[t.INTERFACEDECLARATION=54]="INTERFACEDECLARATION",t[t.METHODDECLARATION=55]="METHODDECLARATION",t[t.NAMESPACEDECLARATION=56]="NAMESPACEDECLARATION",t[t.TYPEDECLARATION=57]="TYPEDECLARATION",t[t.VARIABLEDECLARATION=58]="VARIABLEDECLARATION",t[t.DECORATOR=59]="DECORATOR",t[t.EXPORTMEMBER=60]="EXPORTMEMBER",t[t.SWITCHCASE=61]="SWITCHCASE",t[t.COMMENT=62]="COMMENT"}(e.NodeKind||(e.NodeKind={})),function(t){t[t.DEFAULT=0]="DEFAULT",t[t.OPTIONAL=1]="OPTIONAL",t[t.REST=2]="REST"}(e.ParameterKind||(e.ParameterKind={})),function(t){t[t.CUSTOM=0]="CUSTOM",t[t.GLOBAL=1]="GLOBAL",t[t.OPERATOR=2]="OPERATOR",t[t.OPERATOR_BINARY=3]="OPERATOR_BINARY",t[t.OPERATOR_PREFIX=4]="OPERATOR_PREFIX",t[t.OPERATOR_POSTFIX=5]="OPERATOR_POSTFIX",t[t.UNMANAGED=6]="UNMANAGED",t[t.SEALED=7]="SEALED",t[t.INLINE=8]="INLINE",t[t.EXTERNAL=9]="EXTERNAL",t[t.BUILTIN=10]="BUILTIN",t[t.LAZY=11]="LAZY",t[t.UNSAFE=12]="UNSAFE"}(e.DecoratorKind||(e.DecoratorKind={})),e.DecoratorKind||(e.DecoratorKind={}),function(t){t[t.LINE=0]="LINE",t[t.TRIPLE=1]="TRIPLE",t[t.BLOCK=2]="BLOCK"}(e.CommentKind||(e.CommentKind={})),function(t){t[t.FLOAT=0]="FLOAT",t[t.INTEGER=1]="INTEGER",t[t.STRING=2]="STRING",t[t.REGEXP=3]="REGEXP",t[t.ARRAY=4]="ARRAY",t[t.OBJECT=5]="OBJECT"}(e.LiteralKind||(e.LiteralKind={})),function(t){t[t.PREFIX=0]="PREFIX",t[t.AS=1]="AS",t[t.NONNULL=2]="NONNULL"}(e.AssertionKind||(e.AssertionKind={})),function(t){t[t.USER=0]="USER",t[t.USER_ENTRY=1]="USER_ENTRY",t[t.LIBRARY=2]="LIBRARY",t[t.LIBRARY_ENTRY=3]="LIBRARY_ENTRY"}(e.SourceKind||(e.SourceKind={})),function(t){t[t.NONE=0]="NONE",t[t.ARROW_PARENTHESIZED=1]="ARROW_PARENTHESIZED",t[t.ARROW_SINGLE=2]="ARROW_SINGLE"}(e.ArrowKind||(e.ArrowKind={})),e.findDecorator=function(t,e){if(e)for(var i=0,s=e.length;i<s;++i){var n=e[i];if(n.decoratorKind==t)return n}return null},e.mangleInternalPath=function(t){return t.endsWith(".ts")&&(t=t.substring(0,t.length-3)),t},e.isTypeOmitted=function(t){if(1==t.kind){var e=t.name;return!(e.next||e.identifier.text.length)}return!1},function(t){t[t.NONE=0]="NONE",t[t.IMPORT=1]="IMPORT",t[t.EXPORT=2]="EXPORT",t[t.DECLARE=4]="DECLARE",t[t.CONST=8]="CONST",t[t.LET=16]="LET",t[t.STATIC=32]="STATIC",t[t.READONLY=64]="READONLY",t[t.ABSTRACT=128]="ABSTRACT",t[t.PUBLIC=256]="PUBLIC",t[t.PRIVATE=512]="PRIVATE",t[t.PROTECTED=1024]="PROTECTED",t[t.GET=2048]="GET",t[t.SET=4096]="SET",t[t.DEFINITE_ASSIGNMENT=8192]="DEFINITE_ASSIGNMENT",t[t.AMBIENT=16384]="AMBIENT",t[t.GENERIC=32768]="GENERIC",t[t.GENERIC_CONTEXT=65536]="GENERIC_CONTEXT",t[t.INSTANCE=131072]="INSTANCE",t[t.CONSTRUCTOR=262144]="CONSTRUCTOR",t[t.MODULE_EXPORT=524288]="MODULE_EXPORT",t[t.MODULE_IMPORT=1048576]="MODULE_IMPORT",t[t.RESOLVED=2097152]="RESOLVED",t[t.COMPILED=4194304]="COMPILED",t[t.INLINED=8388608]="INLINED",t[t.SCOPED=16777216]="SCOPED",t[t.TRAMPOLINE=33554432]="TRAMPOLINE",t[t.VIRTUAL=67108864]="VIRTUAL",t[t.MAIN=134217728]="MAIN",t[t.QUOTED=268435456]="QUOTED"}(e.CommonFlags||(e.CommonFlags={}))},function(t,e,i){"use strict";var s=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n=this&&this.__read||function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var s,n,r=i.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(t){n={error:t}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(n)throw n.error}}return a};Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.prototype.visit=function(t){var e,i,r,a,o,u=this;if(null!=t)if(t instanceof Array)t.map((function(t){u.visit(t)}));else if(t instanceof Map)try{for(var p=s(t.entries()),h=p.next();!h.done;h=p.next()){var c=n(h.value,2),l=(c[0],c[1]);this.visit(l)}}catch(t){e={error:t}}finally{try{h&&!h.done&&(i=p.return)&&i.call(p)}finally{if(e)throw e.error}}else if(null!=(o=t)&&"function"==typeof o[Symbol.iterator])try{for(var v=s(t),E=v.next();!E.done;E=v.next()){l=E.value;this.visit(l)}}catch(t){r={error:t}}finally{try{E&&!E.done&&(a=v.return)&&a.call(v)}finally{if(r)throw r.error}}else this._visit(t)},t}();e.AbstractVisitor=r},function(t,e,i){"use strict";var s,n=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(0),a=i(10);function o(t){return t.text.includes("@nearfile")||p(t)}function u(t){return r.ASTBuilder.build(t)}function p(t){return(0==t.kind?t:t.range.source).sourceKind==r.SourceKind.USER_ENTRY}function h(t){return 47==t.kind}function c(t){return 50==t.kind}e.isEntry=p;var l=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.typeMapping={i32:"Integer",u32:"Integer",i64:"String",u64:"String",string:"String",bool:"Boolean",Uint8Array:"String"},e.nonNullableTypes=["i32","u32","i64","u64","bool","boolean"],e.sb=[],e.exportedClasses=new Map,e.wrappedFuncs=new Set,e}return n(i,t),i.build=function(t,e){return(new i).build(e)},i.nearFiles=function(t){return t.program.sources.filter(o)},i.prototype.visitClassDeclaration=function(e){this.exportedClasses.has(u(e.name))||this.exportedClasses.set(u(e.name),e),t.prototype.visitClassDeclaration.call(this,e)},i.prototype.visitFunctionDeclaration=function(e){!p(e)||this.wrappedFuncs.has(u(e.name))||!e.is(2)||0==function(t){return t.signature.parameters.length}(e)&&function(t){return"void"===u(t.signature.returnType)}(e)?t.prototype.visitFunctionDeclaration.call(this,e):(this.generateWrapperFunction(e),e.flags=2^e.flags,this.wrappedFuncs.add(u(e.name)),t.prototype.visit.call(this,e))},i.prototype.generateWrapperFunction=function(t){var e=t.signature,i=e.parameters,s=e.returnType,n=u(s).split("|").filter((function(t){return"null"!==t.trim()})).join("|"),r=u(s).includes("null"),a=t.name.symbol;this.sb.push("\n//@ts-ignore\nfunction __wrapper_"+a+"(): void {"),i.length>0&&this.sb.push(" const json = getInput();\n  read_register(0, <usize>json.buffer);\n  const obj: Obj = JSON.parse(json);"),"void"!==u(s)?this.sb.push("  let result: "+u(s)+" = "+a+"("):this.sb.push("  "+a+"("),i.length>0&&(this.sb[this.sb.length-1]+=i.map((function(t){return v(t)})).join(", ")),this.sb[this.sb.length-1]+=");","void"!==u(s)&&this.sb.push("\n  let encoder = new JSONEncoder();\n  let val: Uint8Array;\n  if ((isString<"+n+">() || isNullable<"+n+">()) && result == null) {\n    encoder.setNull(null);\n    val = encoder.serialize();\n  } else {\n    val = encode<"+n+">(result"+(r?"!":"")+", null, encoder);\n  }\n  value_return(val.byteLength, <usize>val.buffer);"),this.sb.push("}\n\nexport { __wrapper_"+a+" as "+a+" }\n")},i.prototype.typeName=function(t){if(!h(t))return r.ASTBuilder.build(t);var e=u((t=t).name);return t.isGeneric&&(e+="<"+t.typeParameters.map(u).join(", ")+">"),e},i.prototype.build=function(t){var i=this;this.sb=[e.preamble],this.visit(t);var s=t.statements.map((function(t){var e=r.ASTBuilder.build(t);if(h(t)){var s=t;if(e=e.slice(0,e.lastIndexOf("}")),s.members.filter(c).map((function(t){return t})).some((function(t){return null==t.type})))throw new Error("All Fields must have explict type declaration.");var n=i.typeName(s);e+="\n  decode<V = Uint8Array>(buf: V): "+n+' {\n    let json: Obj;\n    if (buf instanceof Uint8Array) {\n      json = JSON.parse(buf);\n    }else {\n      assert(buf instanceof Obj, "argument must be Uint8Array or Json Object");\n      json = <Obj> buf;\n    }\n    return this._decode(json);\n  }\n\n  private _decode(obj: Obj): '+n+" {\n    "+function(t){return t.members.filter(c).map((function(t){var e=u(t.name);return v(t,"this."+e+' = obj.has("'+e+'") ? ')+": this."+e+";"}))}(s).join("\n    ")+'\n    return this;\n  }\n\n  _encode(name: string | null = "", _encoder: JSONEncoder | null = null): JSONEncoder {\n    let encoder = (_encoder != null ? _encoder : new JSONEncoder())!;\n    encoder.pushObject(name);\n    '+function(t){return t.members.filter(c).map((function(t){var e=u(t.type),i=u(t.name);return"encode<"+e+", JSONEncoder>(this."+i+', "'+i+'", encoder);'}))}(s).join("\n    ")+"\n    encoder.popObject();\n    return encoder;\n  }\n  encode(): Uint8Array {\n    return this._encode().serialize();\n  }\n\n  serialize(): Uint8Array {\n    return this.encode();\n  }\n\n  toJSON(): string {\n    return this._encode().toString();\n  }\n}"}return e}));return this.sb.concat(s).join("\n")},i}(r.BaseVisitor);function v(t,e){return void 0===e&&(e=""),e+"decode<"+u(t.type)+', Obj>(obj, "'+u(t.name)+'")'}var E=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.afterParse=function(){var t=this.parser,e=this.writeFile,i=this.baseDir;this.program.sources.forEach(a.TypeChecker.checkTypes),l.nearFiles(t).forEach((function(s){var n=s.text.substr(0,s.text.indexOf("\n")).includes("out");t.donelog.delete(s.internalPath),t.seenlog.delete(s.internalPath),t.program.sources=t.program.sources.filter((function(t){return t!==s}));var r=l.build(t,s);n&&e("out/"+s.normalizedPath,r,i),t.parseFile(r,(p(s)?"":"./")+s.normalizedPath,p(s))}));this.parser.parseFile('\nimport { base64 } from "near-runtime-ts";\nimport { JSONEncoder, JSONDecoder, ThrowingJSONHandler } from "assemblyscript-json";\nimport { u128 } from "bignum";\n// Runtime functions\n// tslint:disable: no-unsafe-any\n\ntype Usize = u64;\n//@ts-ignore\n@global\n@external("env", "read_register")\ndeclare function read_register(register_id: Usize, ptr: Usize): void;\n//@ts-ignore\n@global\n@external("env", "register_len")\ndeclare function register_len(register_id: Usize): Usize;\n\n//@ts-ignore\n@global\n@external("env", "input")\ndeclare function input(register_id: Usize): void;\n//@ts-ignore\n@global\n@external("env", "value_return")\ndeclare function value_return(value_len: Usize, value_ptr: Usize): void;\n//@ts-ignore\n@global\n@external("env", "panic")\ndeclare function panic(): void;\n//@ts-ignore\n@global\nfunction getInput(): Uint8Array { \n  // Reading input bytes.\n  input(0);\n  let json_len = register_len(0);\n  if (json_len == U32.MAX_VALUE) {\n    panic();\n  }\n  let json = new Uint8Array(json_len as u32);\n  //@ts-ignore\n  read_register(0, <usize>json.buffer);\n  return json;\n}\n\nabstract class Value {\n  static String(str: string): Value {\n    return new Str(str);\n  }\n  static Number(num: i64): Value {\n    return new Num(num);\n  }\n  static Bool(b: bool): Value {\n    return new Bools(b);\n  }\n  static Null(): Value {\n    return new Null();\n  }\n  static Array(): Value {\n    return new Arr();\n  }\n  static Object(): Value {\n    return new Obj();\n  }\n\n  toString(): string {\n    if (this instanceof Str) {\n      return (<Str>this).toString();\n    }\n    if (this instanceof Num) {\n      return (<Num>this).toString();\n    }\n    if (this instanceof Bools) {\n      return (<Bools>this).toString();\n    }\n    if (this instanceof Null) {\n      return (<Null>this).toString();\n    }\n    if (this instanceof Arr) {\n      return (<Arr>this).toString();\n    }\n    if (this instanceof Obj) {\n      return (<Obj>this).toString();\n    }\n    return "Value";\n  }\n}\n//@ts-ignore\n@global\nclass Str extends Value {\n  constructor(public _str: string) {\n    super();\n  }\n\n  toString(): string {\n    return "\\"" + this._str + "\\"";\n  }\n}\n//@ts-ignore\n@global\nclass Num extends Value {\n  constructor(public _num: i64) {\n    super();\n  }\n\n  toString(): string {\n    return this._num.toString();\n  }\n}\n//@ts-ignore\n@global\nclass Null extends Value {\n  constructor() {\n    super();\n  }\n\n  toString(): string {\n    return "null";\n  }\n}\n\n//@ts-ignore\n@global class Bools extends Value {\n  constructor(public _bool: bool) {\n    super();\n  }\n\n  toString(): string {\n    return this._bool.toString();\n  }\n}\n\n//@ts-ignore\n@global\nclass Arr extends Value {\n  _arr: Array<Value>;\n  constructor() {\n    super();\n    this._arr = new Array<Value>();\n  }\n\n  push(obj: Value): void {\n    this._arr.push(obj);\n  }\n\n  toString(): string {\n    return "[" + this._arr.map<string>((val: Value,i: i32,_arr: Value[]): string  => val.toString()).join(",") + "]";\n  }\n}\n\n//@ts-ignore\n@global\nclass Obj extends Value {\n  _obj: Map<string, Value>;\n  keys: Array<string>;\n\n  constructor() {\n    super();\n    this._obj = new Map();\n    this.keys = new Array();\n  }\n\n  set(key: string, value: Value): void {\n    if (!this._obj.has(key)) {\n      this.keys.push(key);\n    }\n    this._obj.set(key, value);\n  }\n\n  get(key: string): Value | null {\n    if (!this._obj.has(key)) {\n      return null;\n    }\n    return this._obj.get(key);\n  }\n\n  toString(): string {\n    const objs: string[] = [];\n    for (let i: i32 = 0; i < this.keys.length; i++) {\n      objs.push("\\"" + this.keys[i] + "\\":" + this._obj.get(this.keys[i]).toString());\n    }\n    return "{" + objs.join(",") + "}";\n  }\n\n  has(key: string): bool {\n    return this._obj.has(key);\n  }\n}\n\nclass Handler extends ThrowingJSONHandler {\n  stack: Value[];\n  constructor() {\n    super();\n    this.stack = new Array<Value>();\n  }\n\n  reset(): void {\n    while (this.stack.length > 0) {\n      this.stack.pop();\n    }\n  }\n\n  get peek(): Value {\n    return this.stack[this.stack.length - 1];\n  }\n\n  setString(name: string, value: string): void {\n    const obj: Value = Value.String(value);\n    this.addValue(name, obj);\n  }\n\n  setBoolean(name: string, value: bool): void {\n    const obj = Value.Bool(value);\n    this.addValue(name, obj);\n  }\n\n  setNull(name: string): void {\n    const obj = Value.Null();\n    this.addValue(name, obj);\n  }\n\n  setInteger(name: string, value: i64): void {\n    const obj = Value.Number(value);\n    this.addValue(name, obj);\n  }\n\n  pushArray(name: string): bool {\n    const obj: Value = Value.Array();\n    this.addValue(name, obj);\n    this.stack.push(obj);\n    return true;\n  }\n\n  popArray(): void {\n    if (this.stack.length > 1) {\n      this.stack.pop();\n    }\n  }\n\n  pushObject(name: string): bool {\n    const obj: Value = Value.Object();\n    this.addValue(name, obj);\n    this.stack.push(obj);\n    return true;\n  }\n\n  popObject(): void {\n    if (this.stack.length > 1) {\n      this.stack.pop();\n    }\n  }\n\n  addValue(name: string, obj: Value): void {\n    if (name.length == 0 && obj instanceof Obj && this.stack.length == 0) {\n      this.stack.push(obj);\n      return;\n    }\n    if (this.peek instanceof Obj) {\n      (this.peek as Obj).set(name, obj);\n    }\n    else if (this.peek instanceof Arr) {\n      (<Arr>this.peek).push(obj);\n    }\n  }\n}\n\n//@ts-ignore\n@global()\nclass JSON {\n  private static handler: Handler = new Handler();\n  private static decoder: JSONDecoder<Handler> = new JSONDecoder<Handler>(JSON.handler);\n  static parse(str: Uint8Array ): Obj {\n    JSON.decoder.deserialize(str);\n    const res = JSON.decoder.handler.peek as Obj;\n    JSON.decoder.handler.reset();\n    return res;\n  }\n}\n\n//@ts-ignore\n@global\nfunction encode<T, Output = Uint8Array>(value: T, name: string | null = "", encoder: JSONEncoder = new JSONEncoder()): Output {\n  if (isBoolean<T>()) {\n    //@ts-ignore\n    encoder.setBoolean(name, value);\n  } else if (isInteger<T>()) {\n    if (value instanceof i64 || value instanceof u64) {\n      //@ts-ignore\n      encoder.setString(name, value.toString());\n    } else {\n    //@ts-ignore\n      encoder.setInteger(name, value);\n    }\n    //@ts-ignore\n  } else if (value == <T>null) {\n    encoder.setNull(name);\n  } else if (isString<T>()) {\n    //@ts-ignore\n    encoder.setString(name, value);\n  } else if (isReference<T>()) {\n    if (isArrayLike<T>(value)) {\n      if (value instanceof Uint8Array) {\n        //@ts-ignore\n        encoder.setString(name, base64.encode(<Uint8Array> value));\n      } else {\n        encoder.pushArray(name);\n        for (let i: i32 = 0; i < value.length; i++) {\n          //@ts-ignore\n          encode<valueof<T>, JSONEncoder>(value[i], null, encoder);\n        }\n        encoder.popArray();\n      }\n    } else { // Is an object\n      if (value instanceof u128) {\n        encoder.setString(name, value.toString());\n      } else {\n        //@ts-ignore\n        value._encode(name, encoder);\n      }\n    }\n  } else {\n    throw new Error("Encoding failed");\n  }\n  var output: Output;\n  //@ts-ignore\n  if (output instanceof Uint8Array) {\n    //@ts-ignore\n    return <Output>encoder.serialize();\n  }\n  //@ts-ignore\n  assert( output instanceof JSONEncoder, "Bad return type for encoder");\n  //@ts-ignore\n  return <Output>encoder;\n}\n\n//@ts-ignore\n@inline\nfunction getStr(val: Value, name: String): string {\n  assert(val instanceof Str, "Value with Key: " + name + " is not a string or null");\n  return (<Str>val)._str;\n}\n\nfunction decodeArray<T>(val: Value, name: string): Array<T> {\n  assert(val instanceof Arr, "Value with Key: " + name + " is not an array or null.");\n  const res = new Array<T>();\n  const arr = (<Arr>val)._arr;\n  for (let i: i32 = 0; i < arr.length; i++) {\n    let item: T = decode<T, Value>(arr[i]);\n    res.push(item);\n  }\n  return res;\n}\n\nfunction isNullable<T>(): bool {\n  return isReference<T>() || isArrayLike<T>() || isNullable<T>() || isString<T>();\n}\n\n//@ts-ignore\n@global\nfunction decode<T, V = Uint8Array>(buf: V, name: string = ""): T {\n  const buffer = <Value>(buf instanceof Uint8Array ? JSON.parse(buf) : buf);\n  var val: Value;\n  if (buffer instanceof Obj && name != "") {\n    const obj: Obj = <Obj>buffer;\n    let res = obj.get(name);\n    if (res == null) {\n      //@ts-ignore\n      return <T>null;\n    }\n    val = res;\n  }else {\n    val = <Value> buffer;\n  }\n  if (val instanceof Null) {\n    assert(isNullable<T>(), "Key: " + name + " with type " + nameof<T>() + "is not nullable.");\n    //@ts-ignore\n    return <T>null;\n  }\n  if (isString<T>()) {\n    //@ts-ignore\n    return getStr(val, name);\n  }\n  if (isBoolean<T>()) {\n    assert(val instanceof Bools, "Value with Key: " +  name + " with type " + nameof<T>()  + " is not a string");\n    //@ts-ignore\n    return (<Bools>val)._bool;\n  }\n  var value: T;\n  if (isInteger<T>()) {\n    //@ts-ignore\n    if (value instanceof u64 || value instanceof i64) {\n      assert(val instanceof Str, "Value with Key: " +  name + " with type " + nameof<T>()  + " is an 64-bit integer and is expected to be encoded as a string");\n      let str = (<Str>val)._str;\n      //@ts-ignore\n      return <T>(val instanceof u64) ? U64.parseInt(str) : I64.parseInt(str);\n    }\n    assert(val instanceof Num, "Value with Key: " +  name + " with type " + nameof<T>()  + " is not an Integer");\n    //@ts-ignore\n    return <T>(<Num>val)._num;\n  }\n  assert(isReference<T>(), name + " with type " + nameof<T>() + " must be an integer, boolean, string, object, or array");\n  if (isArrayLike<T>()) {\n    //@ts-ignore\n    if (value instanceof Uint8Array ) {\n      //@ts-ignore\n      return base64.decode(getStr(val, name));\n    }\n    //@ts-ignore\n    // assert(val instanceof Arr, "Value with Key: " +  name + " with type " + nameof<T>()  + " is expected to be an array")\n    //@ts-ignore only checking the instance\n    return <T>decodeArray<valueof<T>>(val, name);\n  }\n  //@ts-ignore\n  if (value instanceof u128) {\n    assert(val instanceof Str);\n    //@ts-ignore\n    return u128.fromString(getStr(val, name));\n  }\n  assert(val instanceof Obj, "Value with Key: " +  name + " with type " + nameof<T>()  + " is not an object or null");\n  value = instantiate<T>();\n  //@ts-ignore\n  return value.decode<Obj>(<Obj>val);\n}\n',"nearFile",!0)},e}(r.Transformer);e.default=E,e.preamble='import { JSONEncoder } from "assemblyscript-json";'},function(t,e,i){"use strict";function s(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,"__esModule",{value:!0}),s(i(5)),s(i(6)),s(i(2)),s(i(9)),s(i(1))},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e,i,s,n,r){this.parser=t,this.writeFile=e,this.readFile=i,this.baseDir=s,this.stdout=n,this.stderr=r}return Object.defineProperty(t.prototype,"program",{get:function(){return this.parser.program},enumerable:!0,configurable:!0}),t}();e.Transformer=s},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i(7),n=i(8),r=i(1),a=function(){function t(){this.sb=[],this.indentLevel=0}return t.build=function(e){var i=new t;return i.visitNode(e),i.finish()},t.prototype.visitNode=function(t){switch(t.kind){case 0:this.visitSource(t);break;case 1:this.visitNamedTypeNode(t);break;case 2:this.visitFunctionTypeNode(t);break;case 4:this.visitTypeParameter(t);break;case 13:case 18:case 22:case 23:case 24:case 25:case 6:this.visitIdentifierExpression(t);break;case 7:this.visitAssertionExpression(t);break;case 8:this.visitBinaryExpression(t);break;case 9:this.visitCallExpression(t);break;case 10:this.visitClassExpression(t);break;case 11:this.visitCommaExpression(t);break;case 12:this.visitElementAccessExpression(t);break;case 14:this.visitFunctionExpression(t);break;case 15:this.visitInstanceOfExpression(t);break;case 16:this.visitLiteralExpression(t);break;case 17:this.visitNewExpression(t);break;case 19:this.visitParenthesizedExpression(t);break;case 20:this.visitPropertyAccessExpression(t);break;case 21:this.visitTernaryExpression(t);break;case 26:this.visitUnaryPostfixExpression(t);break;case 27:this.visitUnaryPrefixExpression(t);break;case 28:this.visitBlockStatement(t);break;case 29:this.visitBreakStatement(t);break;case 30:this.visitContinueStatement(t);break;case 31:this.visitDoStatement(t);break;case 32:this.visitEmptyStatement(t);break;case 33:this.visitExportStatement(t);break;case 34:this.visitExportDefaultStatement(t);break;case 35:this.visitExportImportStatement(t);break;case 36:this.visitExpressionStatement(t);break;case 37:this.visitForStatement(t);break;case 38:this.visitIfStatement(t);break;case 39:this.visitImportStatement(t);break;case 40:this.visitReturnStatement(t);break;case 41:this.visitSwitchStatement(t);break;case 42:this.visitThrowStatement(t);break;case 43:this.visitTryStatement(t);break;case 44:this.visitVariableStatement(t);break;case 46:this.visitWhileStatement(t);break;case 47:this.visitClassDeclaration(t);break;case 48:this.visitEnumDeclaration(t);break;case 49:this.visitEnumValueDeclaration(t);break;case 50:this.visitFieldDeclaration(t);break;case 51:this.visitFunctionDeclaration(t);break;case 52:this.visitImportDeclaration(t);break;case 53:this.visitIndexSignatureDeclaration(t);break;case 54:this.visitInterfaceDeclaration(t);break;case 55:this.visitMethodDeclaration(t);break;case 56:this.visitNamespaceDeclaration(t);break;case 57:this.visitTypeDeclaration(t);break;case 58:this.visitVariableDeclaration(t);break;case 59:this.serializeDecorator(t);break;case 60:this.visitExportMember(t);break;case 5:this.serializeParameter(t);break;case 61:this.visitSwitchCase(t);break;default:assert(!1)}},t.prototype.visitSource=function(t){for(var e=t.statements,i=0,s=e.length;i<s;++i)this.visitNodeAndTerminate(e[i])},t.prototype.visitTypeNode=function(t){switch(t.kind){case 1:this.visitNamedTypeNode(t);break;case 2:this.visitFunctionTypeNode(t);break;default:assert(!1)}},t.prototype.visitTypeName=function(t){this.visitIdentifierExpression(t.identifier);for(var e=this.sb,i=t.next;i;)e.push("."),this.visitIdentifierExpression(i.identifier),i=i.next},t.prototype.visitNamedTypeNode=function(t){this.visitTypeName(t.name);var e=t.typeArguments;if(e){var i=e.length,s=this.sb;if(i){s.push("<"),this.visitTypeNode(e[0]);for(var n=1;n<i;++n)s.push(", "),this.visitTypeNode(e[n]);s.push(">")}t.isNullable&&s.push(" | null")}},t.prototype.visitFunctionTypeNode=function(t){var e=t.isNullable,i=this.sb;i.push(e?"((":"(");var s=t.explicitThisType;s&&(i.push("this: "),this.visitTypeNode(s));var n=t.parameters,r=n.length;if(r){s&&i.push(", "),this.serializeParameter(n[0]);for(var a=1;a<r;++a)i.push(", "),this.serializeParameter(n[a])}var o=t.returnType;o?(i.push(") => "),this.visitTypeNode(o)):i.push(") => void"),e&&i.push(") | null")},t.prototype.visitTypeParameter=function(t){this.visitIdentifierExpression(t.name);var e=t.extendsType;e&&(this.sb.push(" extends "),this.visitTypeNode(e));var i=t.defaultType;i&&(this.sb.push("="),this.visitTypeNode(i))},t.prototype.visitIdentifierExpression=function(t){t.isQuoted?this.visitStringLiteral(t.text):this.sb.push(t.text)},t.prototype.visitArrayLiteralExpression=function(t){var e=this.sb;e.push("[");var i=t.elementExpressions,s=i.length;if(s){i[0]&&this.visitNode(i[0]);for(var n=1;n<s;++n)e.push(", "),i[n]&&this.visitNode(i[n])}e.push("]")},t.prototype.visitObjectLiteralExpression=function(t){var e=this.sb,i=t.names,n=t.values,r=i.length;if(assert(r==n.length),r){e.push("{\n"),s.indent(e,++this.indentLevel),this.visitNode(i[0]),e.push(": "),this.visitNode(n[0]);for(var a=1;a<r;++a){e.push(",\n"),s.indent(e,this.indentLevel);var o=i[a],u=n[a];o===u?this.visitNode(o):(this.visitNode(o),e.push(": "),this.visitNode(u))}e.push("\n"),s.indent(e,--this.indentLevel),e.push("}")}else e.push("{}")},t.prototype.visitAssertionExpression=function(t){var e=this.sb;switch(t.assertionKind){case r.AssertionKind.PREFIX:e.push("<"),this.visitTypeNode(assert(t.toType)),e.push(">"),this.visitNode(t.expression);break;case r.AssertionKind.AS:this.visitNode(t.expression),e.push(" as "),this.visitTypeNode(assert(t.toType));break;case r.AssertionKind.NONNULL:this.visitNode(t.expression),e.push("!");break;default:assert(!1)}},t.prototype.visitBinaryExpression=function(t){var e=this.sb;this.visitNode(t.left),e.push(" "),e.push(n.operatorTokenToString(t.operator)),e.push(" "),this.visitNode(t.right)},t.prototype.visitCallExpression=function(t){var e=this.sb;this.visitNode(t.expression);var i=t.typeArguments;if(i){var s=i.length;if(s){e.push("<"),this.visitTypeNode(i[0]);for(var n=1;n<s;++n)e.push(", "),this.visitTypeNode(i[n]);e.push(">(")}}else e.push("(");var r=t.arguments,a=r.length;if(a){this.visitNode(r[0]);for(n=1;n<a;++n)e.push(", "),this.visitNode(r[n])}e.push(")")},t.prototype.visitClassExpression=function(t){var e=t.declaration;this.visitClassDeclaration(e)},t.prototype.visitCommaExpression=function(t){var e=t.expressions,i=assert(e.length);this.visitNode(e[0]);for(var s=this.sb,n=1;n<i;++n)s.push(","),this.visitNode(e[n])},t.prototype.visitElementAccessExpression=function(t){var e=this.sb;this.visitNode(t.expression),e.push("["),this.visitNode(t.elementExpression),e.push("]")},t.prototype.visitFunctionExpression=function(t){var e=t.declaration;e.arrowKind?assert(0==e.name.text.length):e.name.text.length?this.sb.push("function "):this.sb.push("function"),this.visitFunctionCommon(e)},t.prototype.visitLiteralExpression=function(t){switch(t.literalKind){case 0:this.visitFloatLiteralExpression(t);break;case 1:this.visitIntegerLiteralExpression(t);break;case 2:this.visitStringLiteralExpression(t);break;case 3:this.visitRegexpLiteralExpression(t);break;case 4:this.visitArrayLiteralExpression(t);break;case 5:this.visitObjectLiteralExpression(t);break;default:assert(!1)}},t.prototype.visitFloatLiteralExpression=function(t){this.sb.push(t.value.toString(10))},t.prototype.visitInstanceOfExpression=function(t){this.visitNode(t.expression),this.sb.push(" instanceof "),this.visitTypeNode(t.isType)},t.prototype.visitIntegerLiteralExpression=function(t){this.sb.push(i64_to_string(t.value))},t.prototype.visitStringLiteral=function(t,e){void 0===e&&(e=!1);var i=this.sb,s=0,n=e?"'":'"';i.push(n);for(var r=0,a=t.length;r<a;)switch(t.charCodeAt(r)){case 0:r>s&&i.push(t.substring(s,s=r+1)),i.push("\\0"),s=++r;break;case 8:r>s&&i.push(t.substring(s,r)),s=++r,i.push("\\b");break;case 9:r>s&&i.push(t.substring(s,r)),s=++r,i.push("\\t");break;case 10:r>s&&i.push(t.substring(s,r)),s=++r,i.push("\\n");break;case 11:r>s&&i.push(t.substring(s,r)),s=++r,i.push("\\v");break;case 12:r>s&&i.push(t.substring(s,r)),s=++r,i.push("\\f");break;case 13:r>s&&i.push(t.substring(s,r)),i.push("\\r"),s=++r;break;case 34:e?++r:(r>s&&i.push(t.substring(s,r)),i.push('\\"'),s=++r);break;case 39:e?(r>s&&i.push(t.substring(s,r)),i.push("\\'"),s=++r):++r;break;case 92:r>s&&i.push(t.substring(s,r)),i.push("\\\\"),s=++r;break;default:++r}r>s&&i.push(t.substring(s,r)),i.push(n)},t.prototype.visitStringLiteralExpression=function(t){this.visitStringLiteral(t.value)},t.prototype.visitRegexpLiteralExpression=function(t){var e=this.sb;e.push("/"),e.push(t.pattern),e.push("/"),e.push(t.patternFlags)},t.prototype.visitNewExpression=function(t){this.sb.push("new "),this.visitCallExpression(t)},t.prototype.visitParenthesizedExpression=function(t){var e=this.sb;e.push("("),this.visitNode(t.expression),e.push(")")},t.prototype.visitPropertyAccessExpression=function(t){this.visitNode(t.expression),this.sb.push("."),this.visitIdentifierExpression(t.property)},t.prototype.visitTernaryExpression=function(t){var e=this.sb;this.visitNode(t.condition),e.push(" ? "),this.visitNode(t.ifThen),e.push(" : "),this.visitNode(t.ifElse)},t.prototype.visitUnaryExpression=function(t){switch(t.kind){case 26:this.visitUnaryPostfixExpression(t);break;case 27:this.visitUnaryPrefixExpression(t);break;default:assert(!1)}},t.prototype.visitUnaryPostfixExpression=function(t){this.visitNode(t.operand),this.sb.push(n.operatorTokenToString(t.operator))},t.prototype.visitUnaryPrefixExpression=function(t){this.sb.push(n.operatorTokenToString(t.operator)),this.visitNode(t.operand)},t.prototype.visitNodeAndTerminate=function(t){this.visitNode(t);var e=this.sb;if(e.length&&44!=t.kind&&36!=t.kind){var i=e[e.length-1],s=i.length-1;s>=0&&(125==i.charCodeAt(s)||59==i.charCodeAt(s))?e.push("\n"):e.push(";\n")}else e.push(";\n")},t.prototype.visitBlockStatement=function(t){var e=this.sb,i=t.statements,n=i.length;if(n){e.push("{\n");for(var r=++this.indentLevel,a=0;a<n;++a)s.indent(e,r),this.visitNodeAndTerminate(i[a]);s.indent(e,--this.indentLevel),e.push("}")}else e.push("{}")},t.prototype.visitBreakStatement=function(t){var e=t.label;e?(this.sb.push("break "),this.visitIdentifierExpression(e)):this.sb.push("break")},t.prototype.visitContinueStatement=function(t){var e=t.label;e?(this.sb.push("continue "),this.visitIdentifierExpression(e)):this.sb.push("continue")},t.prototype.visitClassDeclaration=function(t,e){void 0===e&&(e=!1);var i=t.decorators;if(i)for(var n=0,r=i.length;n<r;++n)this.serializeDecorator(i[n]);var a=this.sb;e?a.push("export default "):this.serializeExternalModifiers(t),t.is(128)&&a.push("abstract "),t.name.text.length?(a.push("class "),this.visitIdentifierExpression(t.name)):a.push("class");var o=t.typeParameters;if(o&&o.length){a.push("<"),this.visitTypeParameter(o[0]);for(n=1,r=o.length;n<r;++n)a.push(", "),this.visitTypeParameter(o[n]);a.push(">")}var u=t.extendsType;u&&(a.push(" extends "),this.visitTypeNode(u));var p=t.implementsTypes;if(p){var h=p.length;if(h){a.push(" implements "),this.visitTypeNode(p[0]);for(n=1;n<h;++n)a.push(", "),this.visitTypeNode(p[n])}}var c=t.members;if(c.length){a.push(" {\n");var l=++this.indentLevel;for(n=0,r=c.length;n<r;++n){var v=c[n];(50!=v.kind||v.parameterIndex<0)&&(s.indent(a,l),this.visitNodeAndTerminate(v))}s.indent(a,--this.indentLevel),a.push("}")}else a.push(" {}")},t.prototype.visitDoStatement=function(t){var e=this.sb;e.push("do "),this.visitNode(t.statement),28==t.statement.kind?e.push(" while ("):(e.push(";\n"),s.indent(e,this.indentLevel),e.push("while (")),this.visitNode(t.condition),e.push(")")},t.prototype.visitEmptyStatement=function(t){},t.prototype.visitEnumDeclaration=function(t,e){void 0===e&&(e=!1);var i=this.sb;e?i.push("export default "):this.serializeExternalModifiers(t),t.is(8)&&i.push("const "),i.push("enum "),this.visitIdentifierExpression(t.name);var n=t.values.length;if(n){i.push(" {\n");var r=++this.indentLevel;s.indent(i,r),this.visitEnumValueDeclaration(t.values[0]);for(var a=1;a<n;++a)i.push(",\n"),s.indent(i,r),this.visitEnumValueDeclaration(t.values[a]);i.push("\n"),s.indent(i,--this.indentLevel),i.push("}")}else i.push(" {}")},t.prototype.visitEnumValueDeclaration=function(t){this.visitIdentifierExpression(t.name),t.value&&(this.sb.push(" = "),this.visitNode(t.value))},t.prototype.visitExportImportStatement=function(t){var e=this.sb;e.push("export import "),this.visitIdentifierExpression(t.externalName),e.push(" = "),this.visitIdentifierExpression(t.name)},t.prototype.visitExportMember=function(t){this.visitIdentifierExpression(t.localName),t.exportedName.text!=t.localName.text&&(this.sb.push(" as "),this.visitIdentifierExpression(t.exportedName))},t.prototype.visitExportStatement=function(t){var e=this.sb;t.isDeclare&&e.push("declare ");var i=t.members;if(i&&i.length){var n=i.length;e.push("export {\n");var r=++this.indentLevel;s.indent(e,r),this.visitExportMember(i[0]);for(var a=1;a<n;++a)e.push(",\n"),s.indent(e,r),this.visitExportMember(i[a]);--this.indentLevel,e.push("\n}")}else e.push("export {}");var o=t.path;o&&(e.push(" from "),this.visitStringLiteralExpression(o)),e.push(";")},t.prototype.visitExportDefaultStatement=function(t){var e=t.declaration;switch(e.kind){case 48:this.visitEnumDeclaration(e,!0);break;case 51:this.visitFunctionDeclaration(e,!0);break;case 47:this.visitClassDeclaration(e,!0);break;case 54:this.visitInterfaceDeclaration(e,!0);break;case 56:this.visitNamespaceDeclaration(e,!0);break;default:assert(!1)}},t.prototype.visitExpressionStatement=function(t){this.visitNode(t.expression)},t.prototype.visitFieldDeclaration=function(t){var e=t.decorators;if(e)for(var i=0,s=e.length;i<s;++i)this.serializeDecorator(e[i]);this.serializeAccessModifiers(t),this.visitIdentifierExpression(t.name);var n=this.sb;8192&t.flags&&n.push("!");var r=t.type;r&&(n.push(": "),this.visitTypeNode(r));var a=t.initializer;a&&(n.push(" = "),this.visitNode(a))},t.prototype.visitForStatement=function(t){var e=this.sb;e.push("for (");var i=t.initializer;i&&this.visitNode(i);var s=t.condition;s?(e.push("; "),this.visitNode(s)):e.push(";");var n=t.incrementor;n?(e.push("; "),this.visitNode(n)):e.push(";"),e.push(") "),this.visitNode(t.statement)},t.prototype.visitFunctionDeclaration=function(t,e){void 0===e&&(e=!1);var i=this.sb,s=t.decorators;if(s)for(var n=0,r=s.length;n<r;++n)this.serializeDecorator(s[n]);e?i.push("export default "):(this.serializeExternalModifiers(t),this.serializeAccessModifiers(t)),t.name.text.length?i.push("function "):i.push("function"),this.visitFunctionCommon(t)},t.prototype.visitFunctionCommon=function(t){var e=this.sb;this.visitIdentifierExpression(t.name);var i=t.signature,s=t.typeParameters;if(s){var n=s.length;if(n){e.push("<"),this.visitTypeParameter(s[0]);for(var a=1;a<n;++a)e.push(", "),this.visitTypeParameter(s[a]);e.push(">")}}if(2==t.arrowKind){var o=i.parameters;assert(1==o.length),assert(!i.explicitThisType),this.serializeParameter(o[0])}else{e.push("(");var u=(o=i.parameters).length,p=i.explicitThisType;if(p&&(e.push("this: "),this.visitTypeNode(p)),u){p&&e.push(", "),this.serializeParameter(o[0]);for(a=1;a<u;++a)e.push(", "),this.serializeParameter(o[a])}}var h=t.body,c=i.returnType;t.arrowKind?h?(2==t.arrowKind?assert(r.isTypeOmitted(c)):r.isTypeOmitted(c)?e.push(")"):(e.push("): "),this.visitTypeNode(c)),e.push(" => "),this.visitNode(h)):(assert(!r.isTypeOmitted(c)),e.push(" => "),this.visitTypeNode(c)):(r.isTypeOmitted(c)||t.isAny(266240)?e.push(")"):(e.push("): "),this.visitTypeNode(c)),h&&(e.push(" "),this.visitNode(h)))},t.prototype.visitIfStatement=function(t){var e=this.sb;e.push("if ("),this.visitNode(t.condition),e.push(") ");var i=t.ifTrue;this.visitNode(i),28!=i.kind&&e.push(";\n");var s=t.ifFalse;s&&(28==i.kind?e.push(" else "):e.push("else "),this.visitNode(s))},t.prototype.visitImportDeclaration=function(t){var e=t.foreignName,i=t.name;this.visitIdentifierExpression(e),e.text!=i.text&&(this.sb.push(" as "),this.visitIdentifierExpression(i))},t.prototype.visitImportStatement=function(t){var e=this.sb;e.push("import ");var i=t.declarations,n=t.namespaceName;if(i){var r=i.length;if(r){e.push("{\n");var a=++this.indentLevel;s.indent(e,a),this.visitImportDeclaration(i[0]);for(var o=1;o<r;++o)e.push(",\n"),s.indent(e,a),this.visitImportDeclaration(i[o]);--this.indentLevel,e.push("\n} from ")}else e.push("{} from ")}else n&&(e.push("* as "),this.visitIdentifierExpression(n),e.push(" from "));this.visitStringLiteralExpression(t.path)},t.prototype.visitIndexSignatureDeclaration=function(t){var e=this.sb;e.push("[key: "),this.visitTypeNode(t.keyType),e.push("]: "),this.visitTypeNode(t.valueType)},t.prototype.visitInterfaceDeclaration=function(t,e){void 0===e&&(e=!1);var i=t.decorators;if(i)for(var n=0,r=i.length;n<r;++n)this.serializeDecorator(i[n]);var a=this.sb;e?a.push("export default "):this.serializeExternalModifiers(t),a.push("interface "),this.visitIdentifierExpression(t.name);var o=t.typeParameters;if(o&&o.length){a.push("<"),this.visitTypeParameter(o[0]);for(n=1,r=o.length;n<r;++n)a.push(", "),this.visitTypeParameter(o[n]);a.push(">")}var u=t.extendsType;u&&(a.push(" extends "),this.visitTypeNode(u)),a.push(" {\n");var p=++this.indentLevel,h=t.members;for(n=0,r=h.length;n<r;++n)s.indent(a,p),this.visitNodeAndTerminate(h[n]);--this.indentLevel,a.push("}")},t.prototype.visitMethodDeclaration=function(t){var e=t.decorators;if(e)for(var i=0,s=e.length;i<s;++i)this.serializeDecorator(e[i]);this.serializeAccessModifiers(t),t.is(2048)?this.sb.push("get "):t.is(4096)&&this.sb.push("set "),this.visitFunctionCommon(t)},t.prototype.visitNamespaceDeclaration=function(t,e){void 0===e&&(e=!1);var i=t.decorators;if(i)for(var n=0,r=i.length;n<r;++n)this.serializeDecorator(i[n]);var a=this.sb;e?a.push("export default "):this.serializeExternalModifiers(t),a.push("namespace "),this.visitIdentifierExpression(t.name);var o=t.members;if(o.length){a.push(" {\n");var u=++this.indentLevel;for(n=0,r=o.length;n<r;++n)s.indent(a,u),this.visitNodeAndTerminate(o[n]);s.indent(a,--this.indentLevel),a.push("}")}else a.push(" {}")},t.prototype.visitReturnStatement=function(t){var e=t.value;e?(this.sb.push("return "),this.visitNode(e)):this.sb.push("return")},t.prototype.visitSwitchCase=function(t){var e=this.sb,i=t.label;i?(e.push("case "),this.visitNode(i),e.push(":\n")):e.push("default:\n");var n=t.statements,r=n.length;if(r){var a=++this.indentLevel;s.indent(e,a),this.visitNodeAndTerminate(n[0]);for(var o=1;o<r;++o)s.indent(e,a),this.visitNodeAndTerminate(n[o]);--this.indentLevel}},t.prototype.visitSwitchStatement=function(t){var e=this.sb;e.push("switch ("),this.visitNode(t.condition),e.push(") {\n");for(var i=++this.indentLevel,n=t.cases,r=0,a=n.length;r<a;++r)s.indent(e,i),this.visitSwitchCase(n[r]),e.push("\n");--this.indentLevel,e.push("}")},t.prototype.visitThrowStatement=function(t){this.sb.push("throw "),this.visitNode(t.value)},t.prototype.visitTryStatement=function(t){var e=this.sb;e.push("try {\n");for(var i=++this.indentLevel,n=t.statements,r=0,a=n.length;r<a;++r)s.indent(e,i),this.visitNodeAndTerminate(n[r]);var o=t.catchVariable;if(o){s.indent(e,i-1),e.push("} catch ("),this.visitIdentifierExpression(o),e.push(") {\n");var u=t.catchStatements;if(u)for(r=0,a=u.length;r<a;++r)s.indent(e,i),this.visitNodeAndTerminate(u[r])}var p=t.finallyStatements;if(p){s.indent(e,i-1),e.push("} finally {\n");for(r=0,a=p.length;r<a;++r)s.indent(e,i),this.visitNodeAndTerminate(p[r])}s.indent(e,i-1),e.push("}")},t.prototype.visitTypeDeclaration=function(t){var e=t.decorators;if(e)for(var i=0,s=e.length;i<s;++i)this.serializeDecorator(e[i]);var n=this.sb;this.serializeExternalModifiers(t),n.push("type "),this.visitIdentifierExpression(t.name);var r=t.typeParameters;if(r){var a=r.length;if(a){n.push("<");for(i=0;i<a;++i)this.visitTypeParameter(r[i]);n.push(">")}}n.push(" = "),this.visitTypeNode(t.type)},t.prototype.visitVariableDeclaration=function(t){this.visitIdentifierExpression(t.name);var e=t.type,i=this.sb;8192&t.flags&&i.push("!"),e&&(i.push(": "),this.visitTypeNode(e));var s=t.initializer;s&&(i.push(" = "),this.visitNode(s))},t.prototype.visitVariableStatement=function(t){var e=t.decorators;if(e)for(var i=0,s=e.length;i<s;++i)this.serializeDecorator(e[i]);var n=this.sb,r=t.declarations,a=assert(r.length),o=r[0];this.serializeExternalModifiers(o),n.push(o.is(8)?"const ":o.is(16)?"let ":"var "),this.visitVariableDeclaration(t.declarations[0]);for(i=1;i<a;++i)n.push(", "),this.visitVariableDeclaration(t.declarations[i])},t.prototype.visitWhileStatement=function(t){var e=this.sb;e.push("while ("),this.visitNode(t.condition),32==t.statement.kind?e.push(")"):(e.push(") "),this.visitNode(t.statement))},t.prototype.serializeDecorator=function(t){var e=this.sb;e.push("@"),this.visitNode(t.name);var i=t.arguments;if(i){e.push("(");var n=i.length;if(n){this.visitNode(i[0]);for(var r=1;r<n;++r)e.push(", "),this.visitNode(i[r])}e.push(")\n")}else e.push("\n");s.indent(e,this.indentLevel)},t.prototype.serializeParameter=function(t){var e=this.sb,i=t.parameterKind,s=t.implicitFieldDeclaration;s&&this.serializeAccessModifiers(s),i==r.ParameterKind.REST&&e.push("..."),this.visitIdentifierExpression(t.name);var n=t.type,a=t.initializer;n&&(i!=r.ParameterKind.OPTIONAL||a||e.push("?"),r.isTypeOmitted(n)||(e.push(": "),this.visitTypeNode(n))),a&&(e.push(" = "),this.visitNode(a))},t.prototype.serializeExternalModifiers=function(t){var e=this.sb;t.is(2)?e.push("export "):t.is(1)?e.push("import "):t.is(4)&&e.push("declare ")},t.prototype.serializeAccessModifiers=function(t){var e=this.sb;t.is(256)?e.push("public "):t.is(512)?e.push("private "):t.is(1024)&&e.push("protected "),t.is(32)?e.push("static "):t.is(128)&&e.push("abstract "),t.is(64)&&e.push("readonly ")},t.prototype.finish=function(){var t=this.sb.join("");return this.sb=[],t},t}();e.ASTBuilder=a},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s="  ",n="    ",r="        ";e.indent=function(t,e){for(;e>=4;)t.push(r),e-=4;e>=2&&(t.push(n),e-=2),e&&t.push(s)}},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),function(t){t[t.ABSTRACT=0]="ABSTRACT",t[t.AS=1]="AS",t[t.ASYNC=2]="ASYNC",t[t.AWAIT=3]="AWAIT",t[t.BREAK=4]="BREAK",t[t.CASE=5]="CASE",t[t.CATCH=6]="CATCH",t[t.CLASS=7]="CLASS",t[t.CONST=8]="CONST",t[t.CONTINUE=9]="CONTINUE",t[t.CONSTRUCTOR=10]="CONSTRUCTOR",t[t.DEBUGGER=11]="DEBUGGER",t[t.DECLARE=12]="DECLARE",t[t.DEFAULT=13]="DEFAULT",t[t.DELETE=14]="DELETE",t[t.DO=15]="DO",t[t.ELSE=16]="ELSE",t[t.ENUM=17]="ENUM",t[t.EXPORT=18]="EXPORT",t[t.EXTENDS=19]="EXTENDS",t[t.FALSE=20]="FALSE",t[t.FINALLY=21]="FINALLY",t[t.FOR=22]="FOR",t[t.FROM=23]="FROM",t[t.FUNCTION=24]="FUNCTION",t[t.GET=25]="GET",t[t.IF=26]="IF",t[t.IMPLEMENTS=27]="IMPLEMENTS",t[t.IMPORT=28]="IMPORT",t[t.IN=29]="IN",t[t.INSTANCEOF=30]="INSTANCEOF",t[t.INTERFACE=31]="INTERFACE",t[t.IS=32]="IS",t[t.KEYOF=33]="KEYOF",t[t.LET=34]="LET",t[t.MODULE=35]="MODULE",t[t.NAMESPACE=36]="NAMESPACE",t[t.NEW=37]="NEW",t[t.NULL=38]="NULL",t[t.OF=39]="OF",t[t.PACKAGE=40]="PACKAGE",t[t.PRIVATE=41]="PRIVATE",t[t.PROTECTED=42]="PROTECTED",t[t.PUBLIC=43]="PUBLIC",t[t.READONLY=44]="READONLY",t[t.RETURN=45]="RETURN",t[t.SET=46]="SET",t[t.STATIC=47]="STATIC",t[t.SUPER=48]="SUPER",t[t.SWITCH=49]="SWITCH",t[t.THIS=50]="THIS",t[t.THROW=51]="THROW",t[t.TRUE=52]="TRUE",t[t.TRY=53]="TRY",t[t.TYPE=54]="TYPE",t[t.TYPEOF=55]="TYPEOF",t[t.VAR=56]="VAR",t[t.VOID=57]="VOID",t[t.WHILE=58]="WHILE",t[t.WITH=59]="WITH",t[t.YIELD=60]="YIELD",t[t.OPENBRACE=61]="OPENBRACE",t[t.CLOSEBRACE=62]="CLOSEBRACE",t[t.OPENPAREN=63]="OPENPAREN",t[t.CLOSEPAREN=64]="CLOSEPAREN",t[t.OPENBRACKET=65]="OPENBRACKET",t[t.CLOSEBRACKET=66]="CLOSEBRACKET",t[t.DOT=67]="DOT",t[t.DOT_DOT_DOT=68]="DOT_DOT_DOT",t[t.SEMICOLON=69]="SEMICOLON",t[t.COMMA=70]="COMMA",t[t.LESSTHAN=71]="LESSTHAN",t[t.GREATERTHAN=72]="GREATERTHAN",t[t.LESSTHAN_EQUALS=73]="LESSTHAN_EQUALS",t[t.GREATERTHAN_EQUALS=74]="GREATERTHAN_EQUALS",t[t.EQUALS_EQUALS=75]="EQUALS_EQUALS",t[t.EXCLAMATION_EQUALS=76]="EXCLAMATION_EQUALS",t[t.EQUALS_EQUALS_EQUALS=77]="EQUALS_EQUALS_EQUALS",t[t.EXCLAMATION_EQUALS_EQUALS=78]="EXCLAMATION_EQUALS_EQUALS",t[t.EQUALS_GREATERTHAN=79]="EQUALS_GREATERTHAN",t[t.PLUS=80]="PLUS",t[t.MINUS=81]="MINUS",t[t.ASTERISK_ASTERISK=82]="ASTERISK_ASTERISK",t[t.ASTERISK=83]="ASTERISK",t[t.SLASH=84]="SLASH",t[t.PERCENT=85]="PERCENT",t[t.PLUS_PLUS=86]="PLUS_PLUS",t[t.MINUS_MINUS=87]="MINUS_MINUS",t[t.LESSTHAN_LESSTHAN=88]="LESSTHAN_LESSTHAN",t[t.GREATERTHAN_GREATERTHAN=89]="GREATERTHAN_GREATERTHAN",t[t.GREATERTHAN_GREATERTHAN_GREATERTHAN=90]="GREATERTHAN_GREATERTHAN_GREATERTHAN",t[t.AMPERSAND=91]="AMPERSAND",t[t.BAR=92]="BAR",t[t.CARET=93]="CARET",t[t.EXCLAMATION=94]="EXCLAMATION",t[t.TILDE=95]="TILDE",t[t.AMPERSAND_AMPERSAND=96]="AMPERSAND_AMPERSAND",t[t.BAR_BAR=97]="BAR_BAR",t[t.QUESTION=98]="QUESTION",t[t.COLON=99]="COLON",t[t.EQUALS=100]="EQUALS",t[t.PLUS_EQUALS=101]="PLUS_EQUALS",t[t.MINUS_EQUALS=102]="MINUS_EQUALS",t[t.ASTERISK_EQUALS=103]="ASTERISK_EQUALS",t[t.ASTERISK_ASTERISK_EQUALS=104]="ASTERISK_ASTERISK_EQUALS",t[t.SLASH_EQUALS=105]="SLASH_EQUALS",t[t.PERCENT_EQUALS=106]="PERCENT_EQUALS",t[t.LESSTHAN_LESSTHAN_EQUALS=107]="LESSTHAN_LESSTHAN_EQUALS",t[t.GREATERTHAN_GREATERTHAN_EQUALS=108]="GREATERTHAN_GREATERTHAN_EQUALS",t[t.GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS=109]="GREATERTHAN_GREATERTHAN_GREATERTHAN_EQUALS",t[t.AMPERSAND_EQUALS=110]="AMPERSAND_EQUALS",t[t.BAR_EQUALS=111]="BAR_EQUALS",t[t.CARET_EQUALS=112]="CARET_EQUALS",t[t.AT=113]="AT",t[t.IDENTIFIER=114]="IDENTIFIER",t[t.STRINGLITERAL=115]="STRINGLITERAL",t[t.INTEGERLITERAL=116]="INTEGERLITERAL",t[t.FLOATLITERAL=117]="FLOATLITERAL",t[t.INVALID=118]="INVALID",t[t.ENDOFFILE=119]="ENDOFFILE"}(e.Token||(e.Token={})),e.operatorTokenToString=function(t){switch(t){case 14:return"delete";case 29:return"in";case 30:return"instanceof";case 37:return"new";case 55:return"typeof";case 57:return"void";case 60:return"yield";case 68:return"...";case 70:return",";case 71:return"<";case 72:return">";case 73:return"<=";case 74:return">=";case 75:return"==";case 76:return"!=";case 77:return"===";case 78:return"!==";case 80:return"+";case 81:return"-";case 82:return"**";case 83:return"*";case 84:return"/";case 85:return"%";case 86:return"++";case 87:return"--";case 88:return"<<";case 89:return">>";case 90:return">>>";case 91:return"&";case 92:return"|";case 93:return"^";case 94:return"!";case 95:return"~";case 96:return"&&";case 97:return"||";case 100:return"=";case 101:return"+=";case 102:return"-=";case 103:return"*=";case 104:return"**=";case 105:return"/=";case 106:return"%=";case 107:return"<<=";case 108:return">>=";case 109:return">>>=";case 110:return"&=";case 111:return"|=";case 112:return"^=";default:return assert(!1),""}}},function(t,e,i){"use strict";var s,n=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),r=this&&this.__values||function(t){var e="function"==typeof Symbol&&Symbol.iterator,i=e&&t[e],s=0;if(i)return i.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&s>=t.length&&(t=void 0),{value:t&&t[s++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.depth=0,e}return n(e,t),e.prototype._visit=function(t){switch(t.kind){case 0:this.visitSource(t);break;case 1:this.visitNamedTypeNode(t);break;case 2:this.visitFunctionTypeNode(t);break;case 3:this.visitTypeName(t);case 4:this.visitTypeParameter(t);break;case 13:case 18:case 22:case 23:case 24:case 25:case 6:this.visitIdentifierExpression(t);break;case 7:this.visitAssertionExpression(t);break;case 8:this.visitBinaryExpression(t);break;case 9:this.visitCallExpression(t);break;case 10:this.visitClassExpression(t);break;case 11:this.visitCommaExpression(t);break;case 12:this.visitElementAccessExpression(t);break;case 14:this.visitFunctionExpression(t);break;case 15:this.visitInstanceOfExpression(t);break;case 16:this.visitLiteralExpression(t);break;case 17:this.visitNewExpression(t);break;case 19:this.visitParenthesizedExpression(t);break;case 20:this.visitPropertyAccessExpression(t);break;case 21:this.visitTernaryExpression(t);break;case 26:this.visitUnaryPostfixExpression(t);break;case 27:this.visitUnaryPrefixExpression(t);break;case 28:this.visitBlockStatement(t);break;case 29:this.visitBreakStatement(t);break;case 30:this.visitContinueStatement(t);break;case 31:this.visitDoStatement(t);break;case 32:this.visitEmptyStatement(t);break;case 33:this.visitExportStatement(t);break;case 34:this.visitExportDefaultStatement(t);break;case 35:this.visitExportImportStatement(t);break;case 36:this.visitExpressionStatement(t);break;case 37:this.visitForStatement(t);break;case 38:this.visitIfStatement(t);break;case 39:this.visitImportStatement(t);break;case 40:this.visitReturnStatement(t);break;case 41:this.visitSwitchStatement(t);break;case 42:this.visitThrowStatement(t);break;case 43:this.visitTryStatement(t);break;case 44:this.visitVariableStatement(t);break;case 46:this.visitWhileStatement(t);break;case 47:this.visitClassDeclaration(t);break;case 48:this.visitEnumDeclaration(t);break;case 49:this.visitEnumValueDeclaration(t);break;case 50:this.visitFieldDeclaration(t);break;case 51:this.visitFunctionDeclaration(t);break;case 52:this.visitImportDeclaration(t);break;case 53:this.visitIndexSignatureDeclaration(t);break;case 54:this.visitInterfaceDeclaration(t);break;case 55:this.visitMethodDeclaration(t);break;case 56:this.visitNamespaceDeclaration(t);break;case 57:this.visitTypeDeclaration(t);break;case 58:this.visitVariableDeclaration(t);break;case 59:this.visitDecoratorNode(t);break;case 60:this.visitExportMember(t);break;case 5:this.visitParameter(t);break;case 61:this.visitSwitchCase(t);break;default:assert(!1)}},e.prototype.visitSource=function(t){var e,i;try{for(var s=r(t.statements),n=s.next();!n.done;n=s.next()){var a=n.value;this.depth++,this.visit(a),this.depth--}}catch(t){e={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}},e.prototype.visitTypeNode=function(t){},e.prototype.visitTypeName=function(t){this.visit(t.identifier),t.next&&this.visit(t.next)},e.prototype.visitNamedTypeNode=function(t){this.visit(t.name),this.visit(t.typeArguments)},e.prototype.visitFunctionTypeNode=function(t){var e,i;try{for(var s=r(t.parameters),n=s.next();!n.done;n=s.next()){var a=n.value;this.visit(a)}}catch(t){e={error:t}}finally{try{n&&!n.done&&(i=s.return)&&i.call(s)}finally{if(e)throw e.error}}this.visit(t.returnType)},e.prototype.visitTypeParameter=function(t){this.visit(t.name),t.extendsType&&this.visit(t.extendsType),t.defaultType&&this.visit(t.defaultType)},e.prototype.visitIdentifierExpression=function(t){},e.prototype.visitArrayLiteralExpression=function(t){var e=this;t.elementExpressions.map((function(t){t&&e.visit(t)}))},e.prototype.visitObjectLiteralExpression=function(t){if(t.values&&t.names){assert(t.values.length==t.names.length);for(var e=0;e<t.values.length;e++)this.visit(t.names[e]),this.visit(t.values[e])}},e.prototype.visitAssertionExpression=function(t){t.toType&&this.visit(t.toType),this.visit(t.expression)},e.prototype.visitBinaryExpression=function(t){this.visit(t.left),this.visit(t.right)},e.prototype.visitCallExpression=function(t){this.visit(t.expression),this.visit(t.typeArguments),this.visit(t.arguments)},e.prototype.visitClassExpression=function(t){this.visit(t.declaration)},e.prototype.visitCommaExpression=function(t){this.visit(t.expressions)},e.prototype.visitElementAccessExpression=function(t){this.visit(t.elementExpression),this.visit(t.expression)},e.prototype.visitFunctionExpression=function(t){this.visit(t.declaration)},e.prototype.visitLiteralExpression=function(t){},e.prototype.visitFloatLiteralExpression=function(t){},e.prototype.visitInstanceOfExpression=function(t){this.visit(t.expression),this.visit(t.isType)},e.prototype.visitIntegerLiteralExpression=function(t){},e.prototype.visitStringLiteral=function(t,e){},e.prototype.visitStringLiteralExpression=function(t){},e.prototype.visitRegexpLiteralExpression=function(t){},e.prototype.visitNewExpression=function(t){this.visit(t.expression),this.visit(t.typeArguments),this.visit(t.arguments)},e.prototype.visitParenthesizedExpression=function(t){this.visit(t.expression)},e.prototype.visitPropertyAccessExpression=function(t){this.visit(t.property),this.visit(t.expression)},e.prototype.visitTernaryExpression=function(t){this.visit(t.condition),this.visit(t.ifThen),this.visit(t.ifElse)},e.prototype.visitUnaryExpression=function(t){this.visit(t.operand)},e.prototype.visitUnaryPostfixExpression=function(t){this.visit(t.operand)},e.prototype.visitUnaryPrefixExpression=function(t){this.visit(t.operand)},e.prototype.visitSuperExpression=function(t){},e.prototype.visitFalseExpression=function(t){},e.prototype.visitTrueExpression=function(t){},e.prototype.visitThisExpression=function(t){},e.prototype.visitNullExperssion=function(t){},e.prototype.visitConstructorExpression=function(t){},e.prototype.visitNodeAndTerminate=function(t){},e.prototype.visitBlockStatement=function(t){this.depth++,this.visit(t.statements),this.depth--},e.prototype.visitBreakStatement=function(t){t.label&&this.visit(t.label)},e.prototype.visitContinueStatement=function(t){t.label&&this.visit(t.label)},e.prototype.visitClassDeclaration=function(t,e){this.visit(t.name),this.depth++,this.visit(t.decorators),assert(t.isGeneric?null!=t.typeParameters:null==t.typeParameters),t.isGeneric&&this.visit(t.typeParameters),t.extendsType&&this.visit(t.extendsType),this.visit(t.implementsTypes),this.visit(t.members),this.depth--},e.prototype.visitDoStatement=function(t){this.visit(t.condition),this.visit(t.statement)},e.prototype.visitEmptyStatement=function(t){},e.prototype.visitEnumDeclaration=function(t,e){this.visit(t.name),this.visit(t.decorators),this.visit(t.values)},e.prototype.visitEnumValueDeclaration=function(t){this.visit(t.name),t.initializer&&this.visit(t.initializer)},e.prototype.visitExportImportStatement=function(t){this.visit(t.name),this.visit(t.externalName)},e.prototype.visitExportMember=function(t){this.visit(t.localName),this.visit(t.exportedName)},e.prototype.visitExportStatement=function(t){t.path&&this.visit(t.path),this.visit(t.members)},e.prototype.visitExportDefaultStatement=function(t){this.visit(t.declaration)},e.prototype.visitExpressionStatement=function(t){this.visit(t.expression)},e.prototype.visitFieldDeclaration=function(t){this.visit(t.name),t.type&&this.visit(t.type),t.initializer&&this.visit(t.initializer),this.visit(t.decorators)},e.prototype.visitForStatement=function(t){t.initializer&&this.visit(t.initializer),t.condition&&this.visit(t.condition),t.incrementor&&this.visit(t.incrementor),this.visit(t.statement)},e.prototype.visitFunctionDeclaration=function(t,e){this.visit(t.name),this.visit(t.decorators),t.isGeneric&&this.visit(t.typeParameters),this.visit(t.signature),this.depth++,t.body&&this.visit(t.body),this.depth--},e.prototype.visitFunctionCommon=function(t){},e.prototype.visitIfStatement=function(t){this.visit(t.condition),this.visit(t.ifTrue),t.ifFalse&&this.visit(t.ifFalse)},e.prototype.visitImportDeclaration=function(t){this.visit(t.foreignName),this.visit(t.name),this.visit(t.decorators)},e.prototype.visitImportStatement=function(t){t.namespaceName&&this.visit(t.namespaceName),this.visit(t.declarations)},e.prototype.visitIndexSignatureDeclaration=function(t){},e.prototype.visitInterfaceDeclaration=function(t,e){this.visit(t.name),t.isGeneric&&this.visit(t.typeParameters),this.visit(t.implementsTypes),t.extendsType&&this.visit(t.extendsType),this.depth++,this.visit(t.members),this.depth--},e.prototype.visitMethodDeclaration=function(t){this.visit(t.name),t.isGeneric&&this.visit(t.typeParameters),this.visit(t.signature),this.visit(t.decorators),this.depth++,t.body&&this.visit(t.body),this.depth--},e.prototype.visitNamespaceDeclaration=function(t,e){this.visit(t.name),this.visit(t.decorators),this.visit(t.members)},e.prototype.visitReturnStatement=function(t){t.value&&this.visit(t.value)},e.prototype.visitSwitchCase=function(t){t.label&&this.visit(t.label),this.visit(t.statements)},e.prototype.visitSwitchStatement=function(t){this.visit(t.condition),this.depth++,this.visit(t.cases),this.depth--},e.prototype.visitThrowStatement=function(t){this.visit(t.value)},e.prototype.visitTryStatement=function(t){this.visit(t.statements),t.catchVariable&&this.visit(t.catchVariable),this.visit(t.catchStatements),this.visit(t.finallyStatements)},e.prototype.visitTypeDeclaration=function(t){this.visit(t.name),this.visit(t.decorators),this.visit(t.type),this.visit(t.typeParameters)},e.prototype.visitVariableDeclaration=function(t){this.visit(t.name),t.type&&this.visit(t.type),t.initializer&&this.visit(t.initializer)},e.prototype.visitVariableStatement=function(t){this.visit(t.decorators),this.visit(t.declarations)},e.prototype.visitWhileStatement=function(t){this.visit(t.condition),this.depth++,this.visit(t.statement),this.depth--},e.prototype.visitVoidStatement=function(t){},e.prototype.visitComment=function(t){},e.prototype.visitDecoratorNode=function(t){this.visit(t.name),this.visit(t.arguments)},e.prototype.visitParameter=function(t){this.visit(t.name),t.implicitFieldDeclaration&&this.visit(t.implicitFieldDeclaration),t.initializer&&this.visit(t.initializer),this.visit(t.type)},e}(i(2).AbstractVisitor);e.BaseVisitor=a},function(t,e,i){"use strict";var s,n=this&&this.__extends||(s=function(t,e){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.visitTypeName=function(t){t.identifier.text;null!=t.next&&this.visitTypeName(t.next)},e.checkTypes=function(t){(new e).visit(t)},e}(i(0).BaseVisitor);e.TypeChecker=r}])}));